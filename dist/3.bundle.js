(window.webpackJsonp=window.webpackJsonp||[]).push([[3,7],{1028:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),l=n.n(o),i=n(510),c=n(103),s=n(109),u=n(9),m=n(390),p=n(386),d=n(387),h=n(180),f=n(34),g=n(35),b=n(11),y=n(54),E=n(388),v=n(63),k=new(n(624))({host:"ipfs.infura.io",port:5001,protocol:"https"});function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var N=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(n=!(r=C(t).call(this,e))||"object"!==j(r)&&"function"!=typeof r?T(a):r).state={modal:!1,thingName:"",thingDescription:"",thingAttributes:"",thingBrand:"",ipfsHash:[],button:!0},n.toggle=n.toggle.bind(T(T(n))),n.captureFile=n.captureFile.bind(T(T(n))),n.handleChange=n.handleChange.bind(T(T(n))),n.onSubmitForm=n.onSubmitForm.bind(T(T(n))),n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,a["Component"]),n=t,(o=[{key:"captureFile",value:function(e){var t,n=this;e.preventDefault();var a=e.target.files.length;for(t=0;t<e.target.files.length;t++){var r=e.target.files[t],o=new window.FileReader;o.readAsArrayBuffer(r),o.onloadend=function(e){var t=k.Buffer.from(e.target.result);k.add(t,function(e,t){console.log(e,t),n.setState({ipfsHash:[].concat(w(n.state.ipfsHash),[t[0].hash])}),n.state.ipfsHash.length==a&&n.setState({button:!1})})}}}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,a)),this.forceUpdate()}},{key:"onSubmitForm",value:function(e){e.preventDefault(),this.props.parentHandler(this.state.thingName,this.state.thingDescription,this.state.ipfsHash,this.state.thingBrand)}},{key:"render",value:function(){null==this.props.projectName||this.props.projectName;var e=this.state,t=(e.tokenIDTo,e.number,e.protocol,e.deviceType,e.registryID,e.sensor,e.deviceURN,e.thingName),n=e.thingDescription,a=(e.thingAttributes,e.thingBrand),o=e.button;return r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement(s.a,null,r.a.createElement(u.a,null,r.a.createElement(m.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},r.a.createElement(p.a,{toggle:this.toggle},r.a.createElement("strong",null,"New Thing Registration ")),r.a.createElement(d.a,null,r.a.createElement(h.a,{className:"form-horizontal"},r.a.createElement(f.a,{row:!0},r.a.createElement(u.a,{md:"3"},r.a.createElement(g.a,{htmlFor:"text-input"},"Thing name")),r.a.createElement(u.a,{xs:"12",md:"9"},r.a.createElement(b.a,{type:"text",name:"thingName",value:t,onChange:this.handleChange,id:"text-input",placeholder:"Thing Name"}),r.a.createElement(y.a,{color:"muted"},"Enter Thing Name"))),r.a.createElement(f.a,{row:!0},r.a.createElement(u.a,{md:"3"},r.a.createElement(g.a,{htmlFor:"text-input"},"Thing description")),r.a.createElement(u.a,{xs:"12",md:"9"},r.a.createElement(b.a,{type:"text",name:"thingDescription",value:n,onChange:this.handleChange,id:"text-input",placeholder:"Thing description"}),r.a.createElement(y.a,{color:"muted"},"Enter Thing Description"))),r.a.createElement(f.a,{row:!0},r.a.createElement(u.a,{md:"3"},r.a.createElement(g.a,{htmlFor:"text-input"},"Thing Brand")),r.a.createElement(u.a,{xs:"12",md:"9"},r.a.createElement(b.a,{type:"text",name:"thingBrand",value:a,onChange:this.handleChange,id:"text-input",placeholder:"Thing Brand"}),r.a.createElement(y.a,{color:"muted"},"Enter Thing Brand"))),r.a.createElement(f.a,{row:!0},r.a.createElement(u.a,{md:"3"},r.a.createElement(g.a,{htmlFor:"file-multiple-input"},"Thing Attributes")),r.a.createElement(u.a,{xs:"12",md:"9"},r.a.createElement(b.a,{type:"file",id:"file-multiple-input",name:"thingAttributes",onChange:this.captureFile,multiple:!0}),r.a.createElement(y.a,{color:"muted"},"Enter upto a maximum of 3 pictures of the thing"))))),r.a.createElement(E.a,null,r.a.createElement(v.a,{color:"primary",disabled:o,onClick:this.onSubmitForm},"Add new Thing"))))))}}])&&S(n.prototype,o),l&&S(n,l),t}(),O=(n(458),n(457),n(182)),P=n(397),F=n(183),I=n(37),M=n(110);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function D(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var z=function(e){function t(e){var n,a,o,l,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=!(o=H(t).call(this,e))||"object"!==A(o)&&"function"!=typeof o?B(a):o,l=B(B(n)),c=function(){return r.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},r.a.createElement("div",{className:"sk-spinner sk-spinner-pulse"}))},(i="loading")in l?Object.defineProperty(l,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[i]=c,n.state={email:"",name:"",projectList:[],organization:"",deviceCount:"",projectCount:"",thingCount:"",loading:!1},n.projectFormHandler=n.projectFormHandler.bind(B(B(n))),n.mintTokenFormHandler=n.mintTokenFormHandler.bind(B(B(n))),n.thingFormHandler=n.thingFormHandler.bind(B(B(n))),n.goToLogin=n.goToLogin.bind(B(B(n))),n.goToProject=n.goToProject.bind(B(B(n))),n.deviceModalToggler=r.a.createRef(),n.thingModalToggler=r.a.createRef(),n.renderProjectModal=n.renderProjectModal.bind(B(B(n))),n.renderDeviceModal=n.renderDeviceModal.bind(B(B(n))),n.renderThingModal=n.renderThingModal.bind(B(B(n))),n.logout=n.logout.bind(B(B(n))),n}var n,o,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,a["Component"]),n=t,(o=[{key:"componentWillMount",value:function(){var e=this;l.a.post("/api/dashboard/projectList",{clientToken:sessionStorage.getItem("clientToken")}).then(function(t){if(0==t.data.status)e.props.history.push("/");else for(var n=0;n<t.data.projects.length;n++)e.setState({projectList:[].concat(_(e.state.projectList),[t.data.projects[n].name])})})}},{key:"renderProjectModal",value:function(){this.props.openProjectModal()}},{key:"renderDeviceModal",value:function(){this.deviceModalToggler.current.toggle()}},{key:"renderThingModal",value:function(){this.thingModalToggler.current.toggle()}},{key:"projectFormHandler",value:function(e){this.setState({projectList:[].concat(_(this.state.projectList),[e]),projectCount:parseInt(this.state.projectCount)+1})}},{key:"mintTokenFormHandler",value:function(e){this.setState({deviceCount:parseInt(this.state.deviceCount)+parseInt(e)})}},{key:"thingFormHandler",value:function(e,t,n,a){var r=this;this.renderThingModal(),l.a.post("/api/dashboard/createThing",{thingName:e,thingDescription:t,thingAttributes:n,thingBrand:a,clientToken:sessionStorage.getItem("clientToken")}).then(function(e){1==e.data.status&&r.setState({thingCount:parseInt(r.state.thingCount)+1})})}},{key:"goToProject",value:function(e){this.props.history.push("/project/"+e)}},{key:"goToLogin",value:function(){this.props.history.push("/login")}},{key:"logout",value:function(){sessionStorage.clear(),this.props.history.push("/")}},{key:"render",value:function(){var e,t=this.state,n=(t.email,t.projectList);t.organization,t.projectCount,t.deviceCount,t.thingCount,t.loading;return e=null==this.props.user.organization?r.a.createElement(u.a,null,r.a.createElement("div",{className:"sk-double-bounce"},r.a.createElement("div",{className:"sk-child sk-double-bounce1"}),r.a.createElement("div",{className:"sk-child sk-double-bounce2"}))):r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome to Kramaa Dashboard")," ",r.a.createElement("br",null),r.a.createElement(a.Suspense,{fallback:this.loading()},r.a.createElement("h5",null,"Organization: ",this.props.user.organization.organizationName," ")," ",r.a.createElement("br",null)),r.a.createElement(a.Suspense,{fallback:this.loading()},r.a.createElement("h5",null,"Organization ID: ",this.props.user.organization.uniqueId," ")," ",r.a.createElement("br",null)),r.a.createElement(s.a,null,r.a.createElement(u.a,{xs:"12",sm:"6",md:"4"},r.a.createElement(O.a,null,r.a.createElement(P.a,{className:"text-center"},"Project Count"),r.a.createElement(a.Suspense,{fallback:this.loading()},r.a.createElement(F.a,{className:"text-center"},this.props.user.projectCount)))),r.a.createElement(u.a,{xs:"12",sm:"6",md:"4"},r.a.createElement(O.a,null,r.a.createElement(P.a,{className:"text-center"},"Device Count"),r.a.createElement(a.Suspense,{fallback:this.loading()},r.a.createElement(F.a,{className:"text-center"},this.props.user.deviceCount)))),r.a.createElement(u.a,{xs:"12",sm:"6",md:"4"},r.a.createElement(O.a,null,r.a.createElement(P.a,{className:"text-center"},"Thing Count"),r.a.createElement(a.Suspense,{fallback:this.loading()},r.a.createElement(F.a,{className:"text-center"},this.props.user.thingsCount)))))),r.a.createElement("div",null,e,r.a.createElement(s.a,null,r.a.createElement(u.a,{xs:"12",sm:"6",md:"4"},r.a.createElement(O.a,{className:"text-white bg-primary text-center"},r.a.createElement(F.a,{onClick:this.renderProjectModal},r.a.createElement("blockquote",{className:"card-bodyquote"},r.a.createElement("p",null,"Create new project"),r.a.createElement("footer",null,r.a.createElement("i",{className:"fa fa-plus-circle font-2xl d-block mt-4"}))))),r.a.createElement(i.default,{isClosed:"true"})),r.a.createElement(u.a,{xs:"12",sm:"6",md:"4"},r.a.createElement(O.a,{className:"text-white bg-primary text-center"},r.a.createElement(F.a,{onClick:this.renderDeviceModal},r.a.createElement("blockquote",{className:"card-bodyquote"},r.a.createElement("p",null,"Add new device"),r.a.createElement("footer",null,r.a.createElement("i",{className:"fa fa-plus-circle font-2xl d-block mt-4"}))))),r.a.createElement(c.a,{ref:this.deviceModalToggler,parentHandler:this.mintTokenFormHandler,projectList:n})),r.a.createElement(u.a,{xs:"12",sm:"6",md:"4"},r.a.createElement(O.a,{className:"text-white bg-primary text-center"},r.a.createElement(F.a,{onClick:this.renderThingModal},r.a.createElement("blockquote",{className:"card-bodyquote"},r.a.createElement("p",null,"Add new thing"),r.a.createElement("footer",null,r.a.createElement("i",{className:"fa fa-plus-circle font-2xl d-block mt-4"}))))),r.a.createElement(N,{ref:this.thingModalToggler,parentHandler:this.thingFormHandler}))))}}])&&D(n.prototype,o),m&&D(n,m),t}();t.default=Object(I.b)(function(e){return{auth:e.auth,errors:e.errors,user:e.user}},{openProjectModal:M.d})(z)},510:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(63),l=n(109),i=n(9),c=n(390),s=n(386),u=n(387),m=n(180),p=n(34),d=n(35),h=n(11),f=n(54),g=n(388),b=(n(7),n(37)),y=n(110);n(74),n(22);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a,r;return a=this,(n=!(r=k(t).call(this,e))||"object"!==E(r)&&"function"!=typeof r?w(a):r).state={modal:!0,name:"",description:"",tokenName:"",tokenSymbol:"",industry:"",subIndustry:"",subIndustryList:"",isLoading:!1},n.reset=n.reset.bind(w(w(n))),n.toggle=n.toggle.bind(w(w(n))),n.handleChange=n.handleChange.bind(w(w(n))),n.handleIndustryChange=n.handleIndustryChange.bind(w(w(n))),n.onSubmitForm=n.onSubmitForm.bind(w(w(n))),n}var n,b,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,a["Component"]),n=t,(b=[{key:"reset",value:function(){this.setState(this.initialState)}},{key:"componentDidMount",value:function(){"true"==this.props.isClosed&&this.setState({modal:!1})}},{key:"toggle",value:function(){this.props.closeProjectModal()}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(S({},n,a))}},{key:"handleIndustryChange",value:function(e){var t=e.target,n=t.name,a=t.value;switch(this.setState(S({},n,a)),a){case"1":console.log("1")}}},{key:"onSubmitForm",value:function(e){e.preventDefault(),this.setState({isLoading:!0});var t=this.state,n=t.name,a=(t.description,t.industry),r=t.subIndustry;t.tokenName,t.tokenSymbol,t.isLoading;this.props.createNewProject({name:n,industry:a,subIndustry:r,tokenName:n,tokenSymbol:n,clientToken:sessionStorage.getItem("clientToken")})}},{key:"render",value:function(){var e,t=this.state,n=t.name,a=(t.description,t.industry),b=t.subIndustry;t.tokenName,t.tokenSymbol;return e=t.isLoading?r.a.createElement("div",{className:"sk-folding-cube"},r.a.createElement("div",{className:"sk-cube1 sk-cube"}),r.a.createElement("div",{className:"sk-cube2 sk-cube"}),r.a.createElement("div",{className:"sk-cube4 sk-cube"}),r.a.createElement("div",{className:"sk-cube3 sk-cube"})):r.a.createElement(o.a,{color:"primary",onClick:this.onSubmitForm},"Create Project"),r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement(l.a,null,r.a.createElement(i.a,null,r.a.createElement(c.a,{isOpen:this.props.user.projectModalOpen,toggle:this.toggle,className:this.props.className},r.a.createElement(s.a,{toggle:this.toggle},r.a.createElement("strong",null,"New Project Form")),r.a.createElement(u.a,null,r.a.createElement(m.a,{className:"form-horizontal"},r.a.createElement(p.a,{row:!0},r.a.createElement(i.a,{md:"3"},r.a.createElement(d.a,{htmlFor:"text-input"},"Project Name")),r.a.createElement(i.a,{xs:"12",md:"9"},r.a.createElement(h.a,{type:"text",name:"name",value:n,onChange:this.handleChange,id:"text-input",placeholder:"Text"}),r.a.createElement(f.a,{color:"muted"},"This is a help text"))),r.a.createElement(p.a,{row:!0},r.a.createElement(i.a,{md:"3"},r.a.createElement(d.a,{htmlFor:"text-input"},"Project Description")),r.a.createElement(i.a,{xs:"12",md:"9"},r.a.createElement(h.a,{type:"text",id:"text-input",name:"text-input",placeholder:"Text"}),r.a.createElement(f.a,{color:"muted"},"Describe your project"))),r.a.createElement(p.a,{row:!0},r.a.createElement(i.a,{md:"3"},r.a.createElement(d.a,{htmlFor:"select"},"Select Industry")),r.a.createElement(i.a,{xs:"12",md:"9"},r.a.createElement(h.a,{type:"select",name:"industry",value:a,onChange:this.handleIndustryChange,id:"select"},r.a.createElement("option",{value:"0"},"Please select"),r.a.createElement("option",{value:"Smart City"},"Smart City"),r.a.createElement("option",{value:"Building"},"Building"),r.a.createElement("option",{value:"Energy"},"Energy"),r.a.createElement("option",{value:"Automobile"},"Automobile"),r.a.createElement("option",{value:"Retail"},"Retail"),r.a.createElement("option",{value:"Healthcare"},"Healthcare"),r.a.createElement("option",{value:"Agriculture"},"Agriculture"),r.a.createElement("option",{value:"Supply Chain"},"Supply Chain"),r.a.createElement("option",{value:"Industry"},"Industry"),r.a.createElement("option",{value:"Other"},"Other")))),r.a.createElement(p.a,{row:!0},r.a.createElement(i.a,{md:"3"},r.a.createElement(d.a,{htmlFor:"text-input"},"Sub Industry")),r.a.createElement(i.a,{xs:"12",md:"9"},r.a.createElement(h.a,{type:"text",name:"subIndustry",value:b,onChange:this.handleChange,id:"text-input",placeholder:"Text"}),r.a.createElement(f.a,{color:"muted"},"This is a help text"))))),r.a.createElement(g.a,null,e)))))}}])&&v(n.prototype,b),y&&v(n,y),t}();t.default=Object(b.b)(function(e){return{user:e.user,errors:e.errors}},{createNewProject:y.b,closeProjectModal:y.a})(C)},587:function(e,t){},637:function(e,t){},639:function(e,t){},661:function(e,t){},662:function(e,t){},666:function(e,t){},668:function(e,t){},690:function(e,t){},692:function(e,t){},718:function(e,t){},720:function(e,t){},724:function(e,t){},734:function(e,t){},736:function(e,t){},772:function(e,t){},774:function(e,t){},871:function(e,t){},885:function(e,t){}}]);